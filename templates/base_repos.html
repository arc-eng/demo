{% extends 'base.html' %}

{% block content %}

    <div class="columns">
        <div class="column is-one-fifth has-background-light pl-3">
            <a href="{% url 'repositories:repo_overview' %}" class="button is-rounded is-light is-fullwidth has-text-grey mb-5">
                <span class="icon"><i class="fas fa-bookmark"></i></span>
                <span>Bookmarks</span>
            </a>
            <aside class="menu mt-5 ml-3">
                {% for owner, repos in bookmarked_repos.items %}
                    <p class="menu-label">
                        <span>{{ owner }}</span>
                    </p>
                    <ul class="menu-list">
                        {% for bookmark in repos %}
                            <li class="repo-menu-item">
                                {% if active_tab == "tasks" %}
                                    {% url 'list_tasks' owner=bookmark.owner repo=bookmark.repo_name as repo_link %}
                                {% elif active_tab == "pull-request-manager" %}
                                    {% url 'view_pull_requests' owner=bookmark.owner repo=bookmark.repo_name as repo_link %}
                                {% elif active_tab == "reports" %}
                                    {% url 'view_reports' owner=bookmark.owner repo=bookmark.repo_name as repo_link %}
                                {% else %}
                                    {% url 'list_tasks' owner=bookmark.owner repo=bookmark.repo_name as repo_link %}
                                {% endif %}
                                
                                <a class="{% if bookmark.full_name == selected_repo %}is-active is-light{% else %}has-no-background{% endif %}" href="{{ repo_link }}">
                                    <span class="icon"><i class="fab fa-github"></i></span>
                                    <span>{{ bookmark.repo_name }}</span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endfor %}
            </aside>
            <div class="p-4">
                {%  if not bookmarked_repos|length %}
                    <p class="p-4 has-text-centered has-text-weight-light">
                        No Repositories
                    </p>
                {% endif %}

            </div>
        </div>
        <div class="column has-background-white tiny-rounded p-0">

            {% block repo_content %}

            {% endblock %}
        </div>
    </div>
    <script>
    $(document).ready(function() {
        $('.repo-menu-item').click(function() {
            $(this).addClass('is-unselectable').attr('disabled', 'disabled');
        });
    });
    </script>

{% endblock %}