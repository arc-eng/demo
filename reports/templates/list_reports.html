{% extends "base_repos.html" %}

{% block title %}Reports{% endblock %}

{% block breadcrumbs %}
    <li>
        <a href="#">
        <span class="icon is-small">
          <i class="fas fa-file-alt" aria-hidden="true"></i>
        </span>
            <span>Reports</span>
        </a>
    </li>
{% endblock %}

{% block repo_content %}
    <h3 class="title is-3 has-text-centered">
        <span class="icon"><i class="fas fa-file-alt"></i></span>
        <span>Reports</span>
    </h3>

    <p class="content is-size-5 has-text-weight-light has-text-centered">
        Generate beautiful reports based on your prompts.
    </p>

    <div class="table-container p-3">
        <table class="table is-fullwidth is-hoverable is-size-5">
            <tbody>
                {% for report in reports %}
                    <tr>
                        <td>
                            <a class="button is-rounded" href="{% url 'view_report' owner=repo_owner repo=repo_name report_id=report.id %}">
                                <span class="icon">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <span>Report {{ report.id }}</span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="content px-5">
        <form method="post" action="{% url 'generate_report' owner=repo_owner repo=repo_name %}">
            {% csrf_token %}
            <div class="field">
                <label class="label">Prompt</label>
                <div class="control">
                    <textarea class="textarea is-medium" name="prompt" placeholder="Enter your prompt here..."></textarea>
                </div>
            </div>
            <div class="field is-grouped">
                <div class="control">
                    <button type="submit" class="button is-primary">
                        <span class="icon"><i class="fa fa-plus"></i></span>
                        <span>Generate Report</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
{% endblock %}