{% extends "base_repos.html" %}

{% block title %}Reports{% endblock %}

{% block breadcrumbs %}
    <li>
        <a href="#">
        <span class="icon is-small">
          <i class="fas fa-file-alt" aria-hidden="true"></i>
        </span>
            <span>Reports</span>
        </a>
    </li>
{% endblock %}

{% block repo_content %}
    <h3 class="title is-3 has-text-centered">
        <span class="icon"><i class="fas fa-file-alt"></i></span>
        <span>Reports</span>
    </h3>

    <p class="content is-size-5 has-text-weight-light has-text-centered">
        Generate beautiful reports based on your prompts.
    </p>

    <form method="post" action="{% url 'generate_report' owner=repo_owner repo=repo_name %}">
        {% csrf_token %}
        <div class="field">
            <label class="label">Prompt</label>
            <div class="control">
                <textarea class="textarea" name="prompt" placeholder="Enter your prompt here..."></textarea>
            </div>
        </div>
        <div class="control">
            <button type="submit" class="button is-primary">Generate Report</button>
        </div>
    </form>

    <div class="columns is-centered mt-5">
        <div class="column is-narrow">
            <ul class="is-centered">
                {% for report in reports %}
                    <li class="block">
                        <a class="button is-rounded" href="{% url 'view_report' owner=repo_owner repo=repo_name report_id=report.id %}">
                            <span class="icon">
                                <i class="fas fa-file-alt"></i>
                            </span>
                            <span>Report {{ report.id }}</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}
